# ----------------------------------------------------
# Autogenerated from daas_layer_1.yaml
# ----------------------------------------------------
user_id: dummy_user
session_id: 2a9de718-58d9-4932-afe8-4dd0ffab7621
time_duration: 60m
start_time: "17:00 IST"

# Power users can change it in non DaaS mode; Support types: px4 / mavlink / ardupilot / {specific drone models}
# Should be selected by our system based on time and sensor requirements, battery and range feasibility, etc
drone_model: DJI_Matrice_300_RTK
flight_type: waypoint
drone_type: fleet # Options: {single/fleet} -> Then further fleet settings apply
drones_count: 4
drone_settings: # Optional
  controller: pid # Can be one of {pid/mpc/etc} ?? Can we provide sensible defaults for simulations?

# Supported for: flight_type: waypoint
starting_point:
  - "38.8951"
  - "-77.0364"

# Refer to slide #9 in the MobiSys ppt for primitive assumptions taken here
# Assumption: Task happen in an ordered way -> 1 after the other
# TODO: Adding a async / sync flag should allow tasks to be running concurrently vs in an blocking ordered sense
# 1. Some tasks are inherently blocking, e.g., takeoff, land
# 2. go_to can be an async or a sync (requirements can be to start a dnn_task task while going to the waypoint)
tasks:
  # ---------------------------------- Due to the "flight_type: waypoint" mode ----------------------------------
  - type: takeoff
    height: 1.5 # m
    max_speed: 2 # m/s

  - type: go_to
    mode: waypoint
    lat: 38.8951
    long: -77.0364
  # ----------------------------------------------------

  # ---------------------------------- Part of the follow_me app bundle ----------------------------------
  # TBD
  - type: dnn_task
    app_bundle_id: dreamlab:crop_monitor
    model_image: custom_user_model:disease_thingy # docker image for the model

  # ------------------------------------------------------------------------------------------------------------------------

  - type: return_to_base
    control_priority: high
    conditions:
      battery: 15 # As soon as the battery hits a certain percent -> Return to the closest base
      time: 60m
